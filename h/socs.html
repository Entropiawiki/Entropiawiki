<!DOCTYPE html>
<html lang="en" data-theme="synthwave">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../public/build/tailwind.css">
    <title>Society Table</title>
</head>

<body class="bg-gray-100 dark:bg-black">

<!-- Container for including the navbar -->
<div id="navbarContainer"></div>

<div class="container mt-5 mx-auto">
    <h2 class="text-2xl font-bold mb-4">Society Table</h2>

    <table id="societyTable" class="table-auto w-full border border-collapse border-gray-800">
        <thead class="bg-gray-800 text-white">
        <tr>
            <th class="px-4 py-2">Name</th>
            <th class="px-4 py-2">Founder</th>
            <th class="px-4 py-2">Leader</th>
            <th class="px-4 py-2">Found Time</th>
            <th class="px-4 py-2">URL</th>
        </tr>
        </thead>
        <tbody>
        <!-- Table data will be dynamically populated here -->
        </tbody>
    </table>
</div>

<script src="/s/navbar.js"></script>
<script src="https://code.jquery.com/jquery-3.7.1.slim.min.js"></script>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>

<script>
    $(document).ready(function () {
        // Fetch society data from the server
        $.ajax({
            url: '/api/societies', // Update the URL to your API endpoint
            method: 'GET',
            dataType: 'json',
            success: function (societyData) {
                console.log('Fetched society data:', societyData);

                // Initialize DataTable with the society data
                $('#societyTable').DataTable({
                    data: societyData,
                    columns: [
                        { data: 'Name' },
                        { data: 'Founder_' },
                        { data: 'Leader_' },
                        { data: 'FoundTime' },
                        { data: 'URL' },
                    ],
                    paging: true, // Enable pagination
                    autoWidth: true,
                    ordering: true,
                    pagingType: "full",
                    dom: '<"top"f>rt<"bottom"lip><"clear">',
                    paging: true,
                    lengthMenu: [[10, 25, 50, -1], [10, 25, 50, "All"]],
                    pageLength: 20,
                });
            },
            error: function (error) {
                console.error('Error fetching society data:', error);
            }
        });
    });
</script>
</body>

</html>
