<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.24/css/dataTables.bootstrap5.min.css">
    <title>Society Table</title>
</head>

<body>
<!-- Container for including the navbar -->
<div id="navbarContainer"></div>

<div class="container mt-5">
    <h2>Society Table</h2>

    <table id="societyTable" class="table table-dark table-striped">
        <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Founder</th>
            <th scope="col">Leader</th>
            <th scope="col">Found Time</th>
            <th scope="col">URL</th>
        </tr>
        </thead>
        <tbody>
        <!-- Table data will be dynamically populated here -->
        </tbody>
    </table>
</div>

<script src="/s/navbar.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>

<script>
    $(document).ready(function () {
        // Fetch society data from the server
        $.ajax({
            url: '/api/societies', // Update the URL to your API endpoint
            method: 'GET',
            dataType: 'json',
            success: function (societyData) {
                console.log('Fetched society data:', societyData);

                // Initialize DataTable with the society data
                $('#societyTable').DataTable({
                    data: societyData,
                    columns: [
                        { data: 'Name' },
                        { data: 'Founder_' },
                        { data: 'Leader_' },
                        { data: 'FoundTime' },
                        { data: 'URL' },
                    ],
                    paging: true, // Enable pagination
                    autoWidth: true,
                    ordering: true,
                    pagingType: "full",
                    dom: '<"top"f>rt<"bottom"lip><"clear">', paging: true, lengthMenu: [ [10, 25, 50, -1], [10, 25, 50, "All"] ], pageLength: 20,
                });
            },
            error: function (error) {
                console.error('Error fetching society data:', error);
            }
        });
    });
</script>
</body>

</html>
